[data-reveal] { opacity: 0; transform: translateY(18px); }
[data-reveal].is-visible { opacity: 1; transform: translateY(0); }

:root{
    --dt-bg: #070708;
    --dt-surface: rgba(255,255,255,0.06);
    --dt-surface-2: rgba(255,255,255,0.10);
    --dt-line: rgba(250,204,21,0.22);
    --dt-line-strong: rgba(250,204,21,0.34);
    --dt-text: rgba(255,248,225,0.92);
    --dt-muted: rgba(255,248,225,0.68);
    --dt-gold: #facc15;
    --dt-gold-2: #f59e0b;
    --dt-shadow: 0 18px 60px rgba(0,0,0,0.55);
}

/* Global layout safety (avoid overlap) */
*, *::before, *::after { box-sizing: border-box; }
img, svg, video, canvas { max-width: 100%; }
input, select, textarea, button { max-width: 100%; }
input, select, textarea { min-width: 0; }

/* Make forms behave consistently across flex/grid layouts */
form { min-width: 0; }
.flex { min-width: 0; }
.flex > * { min-width: 0; }

/* Professional navbar: cleaner glass + consistent height + prevent overlaps */
nav.fixed {
    border-bottom: 1px solid rgba(212, 196, 168, 0.75) !important;
    background: rgba(255,255,255,0.62) !important;
    backdrop-filter: blur(16px) saturate(140%);
    -webkit-backdrop-filter: blur(16px) saturate(140%);
    box-shadow: 0 12px 46px rgba(61,47,10,0.10) !important;
}

body.dark-mode nav.fixed{
    border-bottom: 1px solid var(--dt-line) !important;
    background: rgba(7,7,8,0.70) !important;
    box-shadow: 0 14px 60px rgba(0,0,0,0.55) !important;
}

/* Theme toggle buttons always on top + clickable */
#themeToggle,
#themeToggleMain{
    z-index: 60;
}

.dt-nav-actions{
    flex: 0 0 auto;
    min-width: 0;
}

.dt-nav-actions .ui-pill{
    padding: 8px 12px;
}

nav.fixed .mx-auto{
    min-height: 64px;
}

/* Hero offset: avoid visible gap under fixed navbar while keeping content offset */
#accueil{
    margin-top: 0 !important;
    padding-top: 84px;
}

nav.fixed .mx-auto > .hidden.md\:flex{
    min-width: 0;
}

nav.fixed .mx-auto > .hidden.md\:flex > div{
    min-width: 0;
    flex-wrap: nowrap;
    justify-content: center;
}

nav.fixed .mx-auto > [data-auth-allow]{
    flex: 0 0 auto;
}

@media (max-width: 1024px){
    nav.fixed .mx-auto > .hidden.md\:flex > div{ gap: 14px; flex-wrap: wrap; }
}

@media (max-width: 768px){
    .dt-nav-actions{ gap: 8px; }
    .dt-nav-actions .ui-pill{ padding: 8px 10px; }
}

select[data-lang-select]{
    appearance: none;
    -webkit-appearance: none;
    -moz-appearance: none;
    padding: 9px 34px 9px 12px;
    border: 1px solid rgba(212, 196, 168, 0.85);
    background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.84));
    color: rgba(43, 33, 6, 0.92);
    box-shadow: 0 18px 40px rgba(61,47,10,0.10);
    border-radius: 9999px;
    line-height: 1;
    cursor: pointer;
}
body.dark-mode select[data-lang-select]{
    border-color: var(--dt-line-strong);
    background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.05));
    color: rgba(255,248,225,0.92);
    box-shadow: 0 18px 50px rgba(0,0,0,0.48);
}

body.dark-mode{
    background: radial-gradient(1200px 900px at 18% 12%, rgba(250,204,21,0.10), rgba(0,0,0,0) 55%),
                radial-gradient(900px 680px at 85% 22%, rgba(56,189,248,0.06), rgba(0,0,0,0) 58%),
                var(--dt-bg) !important;
    color: var(--dt-text) !important;
}

body.dark-mode nav{
    border-color: var(--dt-line) !important;
    background: rgba(7,7,8,0.78) !important;
    box-shadow: 0 14px 50px rgba(0,0,0,0.45) !important;
}

body.dark-mode .bg-brand-paper{ background: rgba(7,7,8,0.86) !important; }
body.dark-mode .bg-brand-paper\/80{ background: rgba(7,7,8,0.78) !important; }
body.dark-mode .bg-brand-paper\/95{ background: rgba(7,7,8,0.92) !important; }
body.dark-mode .bg-brand-cream{ background: rgba(255,255,255,0.05) !important; }
body.dark-mode .bg-white{ background: rgba(255,255,255,0.06) !important; }

body.dark-mode .border-brand-line\/70{ border-color: var(--dt-line) !important; }
body.dark-mode .border-brand-line\/80{ border-color: var(--dt-line-strong) !important; }

body.dark-mode .text-brand-ink{ color: var(--dt-text) !important; }
body.dark-mode .text-brand-ink\/90{ color: rgba(255,248,225,0.90) !important; }
body.dark-mode .text-brand-muted{ color: var(--dt-muted) !important; }
body.dark-mode .text-brand-muted\/90{ color: rgba(255,248,225,0.72) !important; }
body.dark-mode .text-brand-bronze{ color: var(--dt-gold) !important; }
body.dark-mode .text-brand-accent{ color: var(--dt-gold) !important; }
body.dark-mode .bg-brand-accent{ background: var(--dt-gold) !important; }
body.dark-mode .text-brand-primary{ color: rgba(250,204,21,0.92) !important; }

body.dark-mode .shadow-soft{ box-shadow: var(--dt-shadow) !important; }
body.dark-mode .shadow-lift{ box-shadow: 0 26px 90px rgba(0,0,0,0.62) !important; }

body.dark-mode input,
body.dark-mode select,
body.dark-mode textarea{
    background: rgba(0,0,0,0.55) !important;
    color: rgba(255,248,225,0.92) !important;
    border-color: var(--dt-line) !important;
}
body.dark-mode input::placeholder,
body.dark-mode textarea::placeholder{ color: rgba(255,248,225,0.45) !important; }

.auth-hidden { display: none; }
.auth-panel-enter { opacity: 0; transform: translateY(10px) scale(0.98); }
.auth-panel-enter.auth-panel-in { opacity: 1; transform: translateY(0) scale(1); transition: opacity 260ms ease, transform 260ms ease; }

.ui-pill {
    position: relative;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 10px 14px;
    border: 1px solid rgba(212, 196, 168, 0.95);
    background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.84));
    color: rgba(43, 33, 6, 0.92);
    box-shadow: 0 18px 40px rgba(61,47,10,0.10);
    transition: transform 220ms ease, box-shadow 220ms ease, border-color 220ms ease, background 220ms ease;
    backdrop-filter: blur(10px);
}
.ui-pill:hover {
    transform: translateY(-2px);
    border-color: rgba(212, 175, 55, 0.85);
    box-shadow: 0 22px 60px rgba(61,47,10,0.16);
}
.ui-pill:active { transform: translateY(0); }

.ui-pill::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 9999px;
    background: linear-gradient(115deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.20) 40%, rgba(255,255,255,0) 70%);
    transform: translateX(-120%);
    transition: transform 420ms ease;
    pointer-events: none;
    mix-blend-mode: overlay;
}
.ui-pill:hover::before { transform: translateX(120%); }

.ui-pill-primary {
    background: linear-gradient(180deg, rgba(139,105,20,0.92), rgba(110,82,14,0.92));
    border-color: rgba(139,105,20,0.65);
    color: rgba(255,255,255,0.92);
    box-shadow: 0 18px 50px rgba(139,105,20,0.22);
}
.ui-pill-primary:hover {
    border-color: rgba(212,175,55,0.9);
    box-shadow: 0 22px 70px rgba(139,105,20,0.30);
}

.ui-pill-danger {
    background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.84));
    border-color: rgba(220, 38, 38, 0.35);
    color: rgba(153, 27, 27, 0.92);
}
.ui-pill-danger:hover { border-color: rgba(220, 38, 38, 0.55); }

.ui-avatar {
    width: 42px;
    height: 42px;
    border-radius: 9999px;
    border: 1px solid rgba(212, 196, 168, 0.95);
    background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.95), rgba(250, 246, 235, 0.86));
    display: inline-flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    letter-spacing: 0.08em;
    color: rgba(139,105,20,0.95);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.65), 0 14px 30px rgba(61,47,10,0.10);
}

.ui-identity { line-height: 1; }
.ui-identity .ui-name { font-weight: 700; color: rgba(43,33,6,0.92); }
.ui-identity .ui-sub { margin-top: 4px; font-size: 11px; letter-spacing: 0.26em; text-transform: uppercase; color: rgba(94, 83, 58, 0.78); }

#authUserBadge { position: relative; }
#adminActions {
    display: none;
    position: absolute;
    right: 0;
    top: calc(100% + 12px);
    width: 240px;
    padding: 12px;
    background: rgba(255,255,255,0.92);
    border: 1px solid rgba(212, 196, 168, 0.95);
    box-shadow: 0 28px 70px rgba(61,47,10,0.20);
    backdrop-filter: blur(10px);
}

body.dark-mode .ui-pill{
    border: 1px solid var(--dt-line-strong);
    background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.05));
    color: rgba(255,248,225,0.92);
    box-shadow: 0 18px 50px rgba(0,0,0,0.48);
}
body.dark-mode .ui-pill:hover{
    border-color: rgba(250,204,21,0.70);
    box-shadow: 0 26px 80px rgba(0,0,0,0.62);
}
body.dark-mode .ui-pill-primary{
    background: linear-gradient(180deg, rgba(250,204,21,0.26), rgba(245,158,11,0.16));
    border-color: rgba(250,204,21,0.55);
    color: rgba(255,248,225,0.96);
    box-shadow: 0 18px 60px rgba(250,204,21,0.08);
}
body.dark-mode .ui-pill-primary:hover{
    border-color: rgba(250,204,21,0.80);
    box-shadow: 0 24px 90px rgba(250,204,21,0.12);
}
body.dark-mode .ui-pill-danger{
    background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.05));
    border-color: rgba(239, 68, 68, 0.45);
    color: rgba(254, 202, 202, 0.95);
}
body.dark-mode .ui-pill-danger:hover{ border-color: rgba(239, 68, 68, 0.70); }
body.dark-mode .ui-avatar{
    border: 1px solid rgba(250,204,21,0.35);
    background: radial-gradient(circle at 30% 30%, rgba(250,204,21,0.24), rgba(0,0,0,0.55));
    color: rgba(250,204,21,0.95);
    box-shadow: inset 0 0 0 1px rgba(250,204,21,0.16), 0 14px 40px rgba(0,0,0,0.45);
}
body.dark-mode .ui-identity .ui-name{ color: rgba(255,248,225,0.92); }
body.dark-mode .ui-identity .ui-sub{ color: rgba(255,248,225,0.62); }
body.dark-mode #adminActions{
    background: rgba(0,0,0,0.72);
    border: 1px solid var(--dt-line-strong);
    box-shadow: 0 28px 90px rgba(0,0,0,0.62);
}
#authUserBadge.actions-open #adminActions { display: grid; gap: 10px; }
#adminActions .ui-pill { width: 100%; justify-content: center; }

#trackingPanel {
    margin-top: 3rem;
    background: radial-gradient(circle at 15% 15%, rgba(212, 175, 55, 0.12), rgba(212, 175, 55, 0) 55%),
                radial-gradient(circle at 85% 30%, rgba(27, 79, 114, 0.10), rgba(27, 79, 114, 0) 60%),
                rgba(255, 255, 255, 0.72);
    border: 1px solid rgba(212, 196, 168, 0.65);
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    padding: 2rem 2.2rem;
    border-radius: 22px;
    box-shadow: 0 18px 70px rgba(61, 47, 10, 0.14);
    display: none;
    opacity: 0;
    transform: translateY(14px) scale(0.985);
    transition: opacity 520ms cubic-bezier(0.25, 0.46, 0.45, 0.94), transform 520ms cubic-bezier(0.25, 0.46, 0.45, 0.94);
    position: relative;
    overflow: hidden;
}

#trackingPanel::before {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(115deg, rgba(255,255,255,0) 0%, rgba(255,255,255,0.35) 35%, rgba(255,255,255,0) 60%);
    transform: translateX(-120%);
    opacity: 0;
    pointer-events: none;
}

#trackingPanel.is-open { opacity: 1; transform: translateY(0) scale(1); }
#trackingPanel.is-loading::before { opacity: 1; animation: trackingShimmer 1100ms ease both; }

@keyframes trackingShimmer {
    0% { transform: translateX(-120%); }
    100% { transform: translateX(120%); }
}

#trackingPanel h3 {
    margin-top: 0;
    margin-bottom: 0.3rem;
    font-size: 1.35rem;
}

#trackingStatus {
    font-size: 0.98rem;
    color: #555;
    margin-bottom: 0.8rem;
    transition: opacity 320ms ease, transform 320ms ease;
}

#trackingStatus.is-anim {
    opacity: 0;
    transform: translateY(6px);
}

.tracking-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    margin-bottom: 0.4rem;
}

.tracking-order-id {
    font-size: 0.9rem;
    color: #777;
}

.tracking-status-pill {
    font-size: 0.85rem;
    font-weight: 600;
    padding: 0.3rem 0.7rem;
    border-radius: 999px;
    border: 1px solid rgba(212, 196, 168, 0.65);
    background: rgba(255, 255, 255, 0.70);
    color: rgba(61, 47, 10, 0.9);
    transition: background-color 320ms ease, border-color 320ms ease, color 320ms ease, transform 320ms ease;
}

.tracking-status-pill.is-pop { transform: translateY(-1px); }

.tracking-status-pill.is-prep { background: rgba(212,175,55,0.14); border-color: rgba(212,175,55,0.30); color: rgba(139,105,20,0.95); }
.tracking-status-pill.is-route { background: rgba(27,79,114,0.12); border-color: rgba(27,79,114,0.28); color: rgba(27,79,114,0.92); }
.tracking-status-pill.is-done { background: rgba(16,185,129,0.14); border-color: rgba(16,185,129,0.28); color: rgba(5,150,105,0.95); }

.tracking-progress {
    position: relative;
    width: 100%;
    height: 6px;
    border-radius: 999px;
    background: rgba(0, 0, 0, 0.05);
    overflow: hidden;
    margin-bottom: 1rem;
}

.tracking-progress-bar {
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0%;
    border-radius: 999px;
    background: linear-gradient(90deg, rgba(192,57,43,1), rgba(214,137,16,1), rgba(212,175,55,1));
    background-size: 220% 100%;
    transition: width 0.55s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    filter: drop-shadow(0 8px 16px rgba(212,175,55,0.22));
}

#trackingPanel.is-open .tracking-progress-bar { animation: progressFlow 1.2s linear infinite; }
@keyframes progressFlow { 0% { background-position: 0% 0; } 100% { background-position: 100% 0; } }

#map {
    width: 100%;
    height: 480px;
    border-radius: 20px;
    overflow: hidden;
    border: 1px solid rgba(212, 196, 168, 0.55);
    box-shadow: inset 0 0 0 1px rgba(255,255,255,0.65);
}

.leaflet-container { background: rgba(250, 248, 243, 1); }
.delivery-route {
    filter: drop-shadow(0 0 8px rgba(212,175,55,0.35)) drop-shadow(0 0 18px rgba(192,57,43,0.18));
    animation: routeGlow 1.35s ease-in-out infinite;
}
@keyframes routeGlow { 0%,100% { opacity: 0.82; } 50% { opacity: 1; } }

#etaDisplay {
    margin-top: 0.9rem;
    font-weight: 600;
    font-size: 1.05rem;
    color: #1B4F72;
}

.tracking-meta {
    margin-top: 0.3rem;
    font-size: 0.9rem;
    color: #666;
}

.driver-icon {
    background: #ffffff;
    border-radius: 999px;
    padding: 4px;
    border: 2px solid #C0392B;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    will-change: transform;
    animation: driverFloat 1200ms ease-in-out infinite;
}

.driver-icon::after {
    content: '';
    position: absolute;
    inset: -10px;
    border-radius: 999px;
    border: 2px solid rgba(192, 57, 43, 0.28);
    animation: driverPulse 1200ms ease-out infinite;
    pointer-events: none;
}

body.dark-mode #trackingPanel {
    background: radial-gradient(circle at 15% 15%, rgba(250,204,21,0.10), rgba(250,204,21,0) 55%),
                radial-gradient(circle at 85% 30%, rgba(56,189,248,0.08), rgba(56,189,248,0) 60%),
                rgba(0, 0, 0, 0.42);
    border: 1px solid var(--dt-line);
    box-shadow: 0 22px 90px rgba(0, 0, 0, 0.62);
}
body.dark-mode #trackingStatus { color: rgba(255,248,225,0.72); }
body.dark-mode .tracking-order-id { color: rgba(255,248,225,0.62); }
body.dark-mode .tracking-status-pill {
    border: 1px solid var(--dt-line);
    background: rgba(0, 0, 0, 0.38);
    color: rgba(255,248,225,0.86);
}
body.dark-mode .tracking-status-pill.is-prep { background: rgba(250,204,21,0.12); border-color: rgba(250,204,21,0.30); color: rgba(250,204,21,0.92); }
body.dark-mode .tracking-status-pill.is-route { background: rgba(56,189,248,0.10); border-color: rgba(56,189,248,0.28); color: rgba(186,230,253,0.95); }
body.dark-mode .tracking-status-pill.is-done { background: rgba(34,197,94,0.10); border-color: rgba(34,197,94,0.26); color: rgba(134,239,172,0.95); }
body.dark-mode .tracking-progress { background: rgba(250,204,21,0.10); }
body.dark-mode .tracking-progress-bar {
    background: linear-gradient(90deg, rgba(239,68,68,1), rgba(245,158,11,1), rgba(250,204,21,1));
    filter: drop-shadow(0 10px 18px rgba(250,204,21,0.18));
}
body.dark-mode #map {
    border: 1px solid var(--dt-line);
    box-shadow: inset 0 0 0 1px rgba(250,204,21,0.10);
}
body.dark-mode .leaflet-container { background: rgba(0, 0, 0, 0.85); }
body.dark-mode #etaDisplay { color: rgba(250,204,21,0.92); }
body.dark-mode .tracking-meta { color: rgba(255,248,225,0.64); }
body.dark-mode .driver-icon {
    background: rgba(0,0,0,0.70);
    border: 2px solid rgba(250,204,21,0.55);
    box-shadow: 0 10px 24px rgba(0, 0, 0, 0.55);
}
body.dark-mode .driver-icon::after { border: 2px solid rgba(250, 204, 21, 0.28); }

@keyframes driverFloat { 0%,100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }
@keyframes driverPulse { 0% { transform: scale(0.75); opacity: 0.0; } 18% { opacity: 0.75; } 100% { transform: scale(1.25); opacity: 0; } }

.driver-icon svg {
    display: block;
    width: 26px;
    height: 26px;
    fill: #C0392B;
}
.driver-bike {
    display: block;
    font-size: 24px;
    line-height: 1;
}

@media (max-width: 768px) {
    #map {
        height: 340px;
    }
    #trackingPanel {
        padding: 1.25rem 1.25rem;
        border-radius: 22px 22px 0 0;
        margin-top: 0;
        position: fixed;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 80;
        box-shadow: 0 -18px 70px rgba(0,0,0,0.20);
    }
}

#authPanel {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
}
#authPanel::-webkit-scrollbar {
    width: 0;
    height: 0;
}
#profilePanel {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
}
#profilePanel::-webkit-scrollbar {
    width: 0;
    height: 0;
}
